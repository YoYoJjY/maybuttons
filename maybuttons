-- Ensure GUI setup
local player = game.Players.LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Name = "AnimationControlGui"
gui.Parent = player:WaitForChild("PlayerGui")

-- Create a helper function to make buttons
local function createButton(name, text, position)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Text = text
    button.Size = UDim2.new(0, 100, 0, 40) -- Button size: 100x50 pixels
    button.Position = UDim2.new(1, position, 0, 10) -- Align top-right
    button.AnchorPoint = Vector2.new(1, 0) -- Align right edge to position
    button.BackgroundColor3 = Color3.new(0.2, 0.6, 1) -- Light blue
    button.TextColor3 = Color3.new(1, 1, 1) -- White text
    button.Parent = gui
    return button
end

-- Create four buttons
local speed2Button = createButton("Speed2Button", "Speed 2", -450)
local speed0_3Button = createButton("Speed0_3Button", "Speed 0.3", -340)
local reverseButton = createButton("ReverseButton", "Reverse", -230)
local freezeButton = createButton("FreezeButton", "Freeze", -120)

-- Function to get all active animation tracks
local function getActiveAnimationTracks()
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    local animator = humanoid:FindFirstChildOfClass("Animator")
    if animator then
        return animator:GetPlayingAnimationTracks()
    end
    return {}
end

-- Button functionality
speed2Button.MouseButton1Click:Connect(function()
    for _, track in pairs(getActiveAnimationTracks()) do
        track:AdjustSpeed(2) -- Set animation speed to 2
    end
end)

speed0_3Button.MouseButton1Click:Connect(function()
    for _, track in pairs(getActiveAnimationTracks()) do
        track:AdjustSpeed(0.3) -- Set animation speed to 0.3
    end
end)

reverseButton.MouseButton1Click:Connect(function()
    for _, track in pairs(getActiveAnimationTracks()) do
        track:AdjustSpeed(-2) -- Reverse animation direction
    end
end)

freezeButton.MouseButton1Click:Connect(function()
    for _, track in pairs(getActiveAnimationTracks()) do
        track:AdjustSpeed(0) -- Freeze the animation
    end
end)
